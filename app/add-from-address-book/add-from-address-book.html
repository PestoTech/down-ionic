<ion-view id="add-from-address-book" view-title="Address Book">
  <ion-content>
    <ion-list class="list-avatar">
      <ion-item collection-repeat="item in addFromAddressBook.items"
                ng-class="{
                  'item-divider': item.isDivider,
                  'item-avatar': !item.isDivider,
                  'item-icon-right': !item.isDivider,
                  last: $last
                }"
                item-height="item.isDivider ? '35px' : '71px'">
        <!-- Divider -->
        <div ng-if="item.isDivider">
          {{item.title}}
        </div>

        <!-- User who signed up -->
        <div ng-if="item.user">
          <img class="item-image" ng-src="{{item.user.getImageUrl()}}">
          <h2>{{item.user.name}}</h2>
          <p>{{item.user.username}}</p>
          <user-friendship-button user="item.user">
        </div>

        <!-- Contact with a user object -->
        <!-- user was added via sms by someone already but has not completed app signup (no username) -->
        <div ng-if="item.contact && item.contact.user">
          <span class="contact-image item-image"
                >{{addFromAddressBook.getInitials(item.contact.name.formatted)}}</span>
          <h2>{{item.contact.name.formatted}}</h2>
          <p>Add by SMS</p>
          <user-friendship-button user="item.contact.user">
        </div>

        <!-- Contact without a user object -->
        <div ng-if="item.contact && !item.contact.user">
          <span class="contact-image item-image"
                >{{addFromAddressBook.getInitials(item.contact.name.formatted)}}</span>
          <h2>{{item.contact.name.formatted}}</h2>
          <p>Add by SMS</p>
          <contact-friendship-button contact="item.contact">
        </div>
      </ion-item>
    </ion-list>
    <div id="spinner-container" ng-if="addFromAddressBook.isLoading">
      <ion-spinner></ion-spinner>
    </div>
  </ion-content>
</ion-view>
